/*!
 * typeahead.js 0.9.1
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 *
 * Modified Jan 29 2014 to add Google Search shortcuts - brenden.sparks@sjsu.edu
 */
(function(w){var m="0.9.1",j={isMsie:function(){var a=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return a?parseInt(a[2],10):!1},isBlankString:function(a){return !a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:w.isArray,isFunction:w.isFunction,isObject:w.isPlainObject,isUndefined:function(a){return a===void 0},bind:w.proxy,bindAll:function(c){var a;for(var h in c){w.isFunction(a=c[h])&&(c[h]=w.proxy(a,c))}},indexOf:function(c,h){for(var a=0;c.length>a;a++){if(c[a]===h){return a}}return -1},each:w.each,map:w.map,filter:w.grep,every:function(c,a){var h=!0;return c?(w.each(c,function(e,i){return(h=a.call(null,i,e,c))?void 0:!1}),!!h):h},some:function(c,a){var h=!1;return c?(w.each(c,function(e,i){return(h=a.call(null,i,e,c))?!1:void 0}),!!h):h},mixin:w.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),defer:function(a){setTimeout(a,0)},debounce:function(c,l,a){var o,h;return function(){var n,s,i=this,e=arguments;return n=function(){o=null,a||(h=c.apply(i,e))},s=a&&!o,clearTimeout(o),o=setTimeout(n,l),s&&(h=c.apply(i,e)),h}},throttle:function(h,z){var c,B,l,y,A,a;return A=0,a=function(){A=new Date,l=null,y=h.apply(c,B)},function(){var e=new Date,i=z-(e-A);return c=this,B=arguments,0>=i?(clearTimeout(l),l=null,A=e,y=h.apply(c,B)):l||(l=setTimeout(a,i)),y}},tokenizeQuery:function(a){return w.trim(a).toLowerCase().split(/[\s]+/)},tokenizeText:function(a){return w.trim(a).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},f=function(){var a=/\s+/;return{on:function(h,c){var l;if(!c){return this}for(this._callbacks=this._callbacks||{},h=h.split(a);l=h.shift();){this._callbacks[l]=this._callbacks[l]||[],this._callbacks[l].push(c)}return this},trigger:function(o,c){var t,h;if(!this._callbacks){return this}for(o=o.split(a);t=o.shift();){if(h=this._callbacks[t]){for(var l=0;h.length>l;l+=1){h[l].call(this,{type:t,data:c})}}}return this}}}(),x=function(){function a(h){h&&h.el||w.error("EventBus initialized without el"),this.$el=w(h.el)}var c="typeahead:";return j.mixin(a.prototype,{trigger:function(h){var i=[].slice.call(arguments,1);this.$el.trigger(c+h,i)}}),a}(),b=function(){function a(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=RegExp("^"+this.prefix)}function i(){return(new Date).getTime()}function u(e){return JSON.stringify(j.isUndefined(e)?null:e)}function c(e){return JSON.parse(e)}var h,l=window.localStorage;return h=window.localStorage&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),c(l.getItem(this._prefix(e)))},set:function(e,n,o){return j.isNumber(o)?l.setItem(this._ttlKey(e),u(i()+o)):l.removeItem(this._ttlKey(e)),l.setItem(this._prefix(e),u(n))},remove:function(e){return l.removeItem(this._ttlKey(e)),l.removeItem(this._prefix(e)),this},clear:function(){var r,s,o=[],y=l.length;for(r=0;y>r;r++){(s=l.key(r)).match(this.keyMatcher)&&o.push(s.replace(this.keyMatcher,""))}for(r=o.length;r--;){this.remove(o[r])}return this},isExpired:function(e){var o=c(l.getItem(this._ttlKey(e)));return j.isNumber(o)&&i()>o?!0:!1}}:{get:j.noop,set:j.noop,remove:j.noop,clear:j.noop,isExpired:j.noop},j.mixin(a.prototype,h),a}(),d=function(){function a(c){j.bindAll(this),c=c||{},this.sizeLimit=c.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return j.mixin(a.prototype,{get:function(c){return this.cache[c]},set:function(h,l){var c;this.cachedKeysByAge.length===this.sizeLimit&&(c=this.cachedKeysByAge.shift(),delete this.cache[c]),this.cache[h]=l,this.cachedKeysByAge.push(h)}}),a}(),v=function(){function z(a){j.bindAll(this),a=j.isString(a)?{url:a}:a,i=i||new d,l=j.isNumber(a.maxParallelRequests)?a.maxParallelRequests:l||6,this.url=a.url,this.wildcard=a.wildcard||"%QUERY",this.filter=a.filter,this.replace=a.replace,this.ajaxSettings={type:"get",cache:a.cache,timeout:a.timeout,dataType:a.dataType||"json",beforeSend:a.beforeSend},this._get=(/^throttle$/i.test(a.rateLimitFn)?j.throttle:j.debounce)(this._get,a.rateLimitWait||300)}function B(){A++}function t(){A--}function y(){return l>A}var l,i,A=0,o={};return j.mixin(z.prototype,{_get:function(c,h){function a(e){var n=r.filter?r.filter(e):e;h&&h(n),i.set(c,e)}var r=this;y()?this._sendRequest(c).done(a):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(h){function a(){t(),o[h]=null,c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var c=this,n=o[h];return n||(B(),n=o[h]=w.ajax(h,this.ajaxSettings).always(a)),n},get:function(a,u){var D,c,h=this,C=encodeURIComponent(a||"");return u=u||j.noop,D=this.replace?this.replace(this.url,C):this.url.replace(this.wildcard,C),(c=i.get(D))?j.defer(function(){u(h.filter?h.filter(c):c)}):this._get(D,u),!!c}}),z}(),q=function(){function h(i){j.bindAll(this),j.isString(i.template)&&!i.engine&&w.error("no template engine specified"),i.local||i.prefetch||i.remote||w.error("one of local, prefetch, or remote is required"),this.name=i.name||j.getUniqueId(),this.limit=i.limit||5,this.minLength=i.minLength||1,this.header=i.header,this.footer=i.footer,this.valueKey=i.valueKey||"value",this.template=a(i.template,i.engine,this.valueKey),this.local=i.local,this.prefetch=i.prefetch,this.remote=i.remote,this.itemHash={},this.adjacencyList={},this.storage=i.name?new b(i.name):null}function c(i){return"http://search.calstate.edu/search?x=12&y=12&access=p&site=sjsu&output=xml_no_dtd&client=sjsu-v5&sort=date%253AD%253AL%253Ad1&proxystylesheet=sjsu-v5&oe=UTF-8&q="+encodeURIComponent(i)}function a(l,A,C){var y,z,B,i='<div class="tt-suggestion">%body</div>';return j.isFunction(l)?y=l:j.isString(l)?(z=i.replace("%body",l),B=A.compile(z),y=j.bind(B.render,B)):y=function(o){var n=c(o[C]);return i.replace("%body","<p><a href="+n+">"+o[C]+"</a></p>")},y}var e={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return j.mixin(h.prototype,{_processLocalData:function(i){this._mergeProcessedData(this._processData(i))},_loadPrefetchData:function(t){function E(n){var H=t.filter?t.filter(n):n,F=A._processData(H),G=F.itemHash,l=F.adjacencyList;A.storage&&(A.storage.set(e.itemHash,G,t.ttl),A.storage.set(e.adjacencyList,l,t.ttl),A.storage.set(e.thumbprint,o,t.ttl),A.storage.set(e.protocol,j.getProtocol(),t.ttl)),A._mergeProcessedData(F)}var i,D,C,B,z,y,A=this,o=m+(t.thumbprint||"");return this.storage&&(i=this.storage.get(e.thumbprint),D=this.storage.get(e.protocol),C=this.storage.get(e.itemHash),B=this.storage.get(e.adjacencyList)),z=i!==o||D!==j.getProtocol(),t=j.isString(t)?{url:t}:t,t.ttl=j.isNumber(t.ttl)?t.ttl:86400000,C&&B&&!z?(this._mergeProcessedData({itemHash:C,adjacencyList:B}),y=w.Deferred().resolve()):y=w.getJSON(t.url).done(E),y},_transformDatum:function(i){var o=j.isString(i)?i:i[this.valueKey],r=i.tokens||j.tokenizeText(o),l={value:o,tokens:r};return j.isString(i)?(l.datum={},l.datum[this.valueKey]=i):l.datum=i,l.tokens=j.filter(l.tokens,function(n){return !j.isBlankString(n)}),l.tokens=j.map(l.tokens,function(n){return n.toLowerCase()}),l},_processData:function(i){var o=this,r={},l={};return j.each(i,function(s,y){var z=o._transformDatum(y),n=j.getUniqueId(z.value);r[n]=z,j.each(z.tokens,function(u,B){var C=B.charAt(0),A=l[C]||(l[C]=[n]);!~j.indexOf(A,n)&&A.push(n)})}),{itemHash:r,adjacencyList:l}},_mergeProcessedData:function(i){var l=this;j.mixin(this.itemHash,i.itemHash),j.each(i.adjacencyList,function(r,o){var s=l.adjacencyList[r];l.adjacencyList[r]=s?s.concat(o):o})},_getLocalSuggestions:function(i){var y,A=this,l=[],u=[],z=[];return j.each(i,function(o,r){var s=r.charAt(0);!~j.indexOf(l,s)&&l.push(s)}),j.each(l,function(o,n){var r=A.adjacencyList[n];return r?(u.push(r),(!y||r.length<y.length)&&(y=r),void 0):!1}),u.length<l.length?[]:(j.each(y,function(t,r){var o,n,B=A.itemHash[r];o=j.every(u,function(s){return ~j.indexOf(s,r)}),n=o&&j.every(i,function(s){return j.some(B.tokens,function(C){return 0===C.indexOf(s)})}),n&&z.push(B)}),z)},initialize:function(){var i;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new v(this.remote):null,i=this.prefetch?this._loadPrefetchData(this.prefetch):w.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return i},i},getSuggestions:function(l,A){function C(n){z=z.slice(0),j.each(n,function(o,u){var D,r=B._transformDatum(u);return D=j.some(z,function(s){return r.value===s.value}),!D&&z.push(r),z.length<B.limit}),A&&A(z)}var y,z,B=this,i=!1;l.length<this.minLength||(y=j.tokenizeQuery(l),z=this._getLocalSuggestions(y).slice(0,this.limit),z.length<this.limit&&this.transport&&(i=this.transport.get(l,C)),!i&&A&&A(z))}}),h}(),p=function(){function h(i){var l=this;j.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=w(i.hint),this.$input=w(i.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),j.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){l.specialKeyCodeMap[e.which||e.keyCode]||j.defer(l._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=a(this.$input)}function a(i){return w("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:i.css("font-family"),fontSize:i.css("font-size"),fontStyle:i.css("font-style"),fontVariant:i.css("font-variant"),fontWeight:i.css("font-weight"),wordSpacing:i.css("word-spacing"),letterSpacing:i.css("letter-spacing"),textIndent:i.css("text-indent"),textRendering:i.css("text-rendering"),textTransform:i.css("text-transform")}).insertAfter(i)}function c(i,l){return i=(i||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),l=(l||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),i===l}return j.mixin(h.prototype,f,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(i){var l=this.specialKeyCodeMap[i.which||i.keyCode];l&&this.trigger(l+"Keyed",i)},_compareQueryToInputValue:function(){var n=this.getInputValue(),o=c(this.query,n),l=o?this.query.length!==n.length:!1;l?this.trigger("whitespaceChanged",{value:this.query}):o||this.trigger("queryChanged",{value:this.query=n})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(i,l){this.$input.val(i),!l&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(e){this.$hint.val(e)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var i,l=this.$input.val().length,o=this.$input[0].selectionStart;return j.isNumber(o)?o===l:document.selection?(i=document.selection.createRange(),i.moveStart("character",-l),l===i.text.length):!0}}),h}(),k=function(){function h(l){j.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.$menu=w(l.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function a(e){return e.data("suggestion")}var c={suggestionsList:'<span class="tt-suggestions"></span>'},i={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};return j.mixin(h.prototype,f,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(n){var l=w(n.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),l.addClass("tt-is-under-cursor")},_handleSelection:function(n){var l=w(n.currentTarget);this.trigger("suggestionSelected",a(l))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(o){var u,l,y,s;if(this.isVisible()){if(u=this._getSuggestions(),l=u.filter(".tt-is-under-cursor"),l.removeClass("tt-is-under-cursor"),y=u.index(l)+o,y=(y+1)%(u.length+1)-1,-1===y){return this.trigger("cursorRemoved"),void 0}-1>y&&(y=u.length-1),s=u.eq(y).addClass("tt-is-under-cursor"),this.trigger("cursorMoved",a(s))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(n){var o={left:"0",right:"auto"},l={left:"auto",right:" 0"};"ltr"===n?this.$menu.css(o):this.$menu.css(l)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var e=this._getSuggestions().filter(".tt-is-under-cursor").first();return e.length>0?a(e):null},getFirstSuggestion:function(){var e=this._getSuggestions().first();return e.length>0?a(e):null},renderSuggestions:function(A,C){var z,t,r,B,y="tt-dataset-"+A.name,o=this.$menu.find("."+y);0===o.length&&(z=w(c.suggestionsList).css(i.suggestionsList),o=w("<div></div>").addClass(y).append(A.header).append(z).append(A.footer).appendTo(this.$menu)),C.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),t=document.createElement("div"),r=document.createDocumentFragment(),j.each(C,function(e,l){t.innerHTML=A.template(l.datum),B=w(t.firstChild).css(i.suggestion).data("suggestion",l),B.children().each(function(){w(this).css(i.suggestionChild)}),r.appendChild(B[0])}),o.show().find(".tt-suggestions").html(r)):this.clearSuggestions(A.name),this.trigger("suggestionsRendered")},clearSuggestions:function(n){var o=n?this.$menu.find(".tt-dataset-"+n):this.$menu.find('[class^="tt-dataset-"]'),l=o.find(".tt-suggestions");o.hide(),l.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),h}(),g=function(){function i(o){var u,y,s;j.bindAll(this),this.$node=c(o.input),this.datasets=o.datasets,this.dir=null,this.eventBus=o.eventBus,u=this.$node.find(".tt-dropdown-menu"),y=this.$node.find(".tt-query"),s=this.$node.find(".tt-hint"),this.dropdownView=new k({menu:u}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new p({input:y,hint:s}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function c(z){var t=w(l.wrapper),A=w(l.dropdown),u=w(z),y=w(l.hint);t=t.css(a.wrapper),A=A.css(a.dropdown),y.css(a.hint).css({backgroundAttachment:u.css("background-attachment"),backgroundClip:u.css("background-clip"),backgroundColor:u.css("background-color"),backgroundImage:u.css("background-image"),backgroundOrigin:u.css("background-origin"),backgroundPosition:u.css("background-position"),backgroundRepeat:u.css("background-repeat"),backgroundSize:u.css("background-size")}),u.data("ttAttrs",{dir:u.attr("dir"),autocomplete:u.attr("autocomplete"),spellcheck:u.attr("spellcheck"),style:u.attr("style")}),u.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(a.query);try{!u.attr("dir")&&u.attr("dir","auto")}catch(o){}return u.wrap(t).parent().prepend(y).append(A)}function h(n){var o=n.find(".tt-query");j.each(o.data("ttAttrs"),function(e,r){j.isUndefined(r)?o.removeAttr(e):o.attr(e,r)}),o.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(n),n.remove()}var l={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return j.isMsie()&&j.mixin(a.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),j.isMsie()&&7>=j.isMsie()&&(j.mixin(a.wrapper,{display:"inline",zoom:"1"}),j.mixin(a.query,{marginTop:"-1px"})),j.mixin(i.prototype,f,{_managePreventDefault:function(r){var y,o,z=r.data,u=!1;switch(r.type){case"tabKeyed":y=this.inputView.getHintValue(),o=this.inputView.getInputValue(),u=y&&y!==o;break;case"upKeyed":case"downKeyed":u=!z.shiftKey&&!z.ctrlKey&&!z.metaKey}u&&z.preventDefault()},_setLanguageDirection:function(){var e=this.inputView.getLanguageDirection();e!==this.dir&&(this.dir=e,this.$node.css("direction",e),this.dropdownView.setLanguageDirection(e))},_updateHint:function(){var F,B,A,G,y,z=this.dropdownView.getFirstSuggestion(),E=z?z.value:null,D=this.dropdownView.isVisible(),C=this.inputView.isOverflow();E&&D&&!C&&(F=this.inputView.getInputValue(),B=F.replace(/\s{2,}/g," ").replace(/^\s+/g,""),A=j.escapeRegExChars(B),G=RegExp("^(?:"+A+")(.*$)","i"),y=G.exec(E),this.inputView.setHintValue(F+(y?y[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(n){var o=n.data;this.inputView.setInputValue(o.value,!0)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(e){this.dropdownView["blured"===e.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(n){var o=n.data;o.shiftKey||o.ctrlKey||o.metaKey||this.dropdownView["upKeyed"===n.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(o){var r="suggestionSelected"===o.type,s=r?o.data:this.dropdownView.getSuggestionUnderCursor();s&&(this.inputView.setInputValue(s.value),r?this.inputView.focus():o.data.preventDefault(),r&&j.isMsie()?j.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",s.datum))},_getSuggestions:function(){var n=this,o=this.inputView.getQuery();j.isBlankString(o)||j.each(this.datasets,function(e,r){r.getSuggestions(o,function(s){o===n.inputView.getQuery()&&n.dropdownView.renderSuggestions(r,s)})})},_autocomplete:function(u){var A,o,B,y,z;("rightKeyed"!==u.type&&"leftKeyed"!==u.type||(A=this.inputView.isCursorAtEnd(),o="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===u.type:"rightKeyed"===u.type,A&&!o))&&(B=this.inputView.getQuery(),y=this.inputView.getHintValue(),""!==y&&B!==y&&(z=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(z.value),this.eventBus.trigger("autocompleted",z.datum)))},_propagateEvent:function(e){this.eventBus.trigger(e.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),h(this.$node),this.$node=null},setQuery:function(e){this.inputView.setQuery(e),this.inputView.setInputValue(e),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),i}();(function(){var c,h={},a="ttView";c={initialize:function(l){function n(){var r,t=w(this),s=new x({el:t});r=j.map(i,function(e){return e.initialize()}),t.data(a,new g({input:t,eventBus:s=new x({el:t}),datasets:i})),w.when.apply(w,r).always(function(){j.defer(function(){s.trigger("initialized")})})}var i;return l=j.isArray(l)?l:[l],0===l.length&&w.error("no datasets provided"),i=j.map(l,function(o){var r=h[o.name]?h[o.name]:new q(o);return o.name&&(h[o.name]=r),r}),this.each(n)},destroy:function(){function i(){var n=w(this),l=n.data(a);l&&(l.destroy(),n.removeData(a))}return this.each(i)},setQuery:function(n){function l(){var e=w(this).data(a);e&&e.setQuery(n)}return this.each(l)}},jQuery.fn.typeahead=function(e){return c[e]?c[e].apply(this,[].slice.call(arguments,1)):c.initialize.apply(this,arguments)}})()})(window.jQuery);
