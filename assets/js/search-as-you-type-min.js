var searchAsYouTypeConfiguration={resourcesPath:"http://www.sjsu.edu/sayt/",ajaxResponderUrl:"http://www.sjsu.edu/sayt/responder.php",helpPageUrl:"",maxFullResults:4,keystrokeDelay:5,showResultsDelay:10,bottomPageMargin:10};function SearchAsYouType(){}SearchAsYouType.prototype.initialize=function(b,a){this.initializeVariables_(b);this.detectBrowser_();this.attachStylesheets_();this.createDomElements_();this.restoreInputField_();this.addEventHandlers_();this.prepareRandomTip_();this.updateDimensionsAndShadow_(null);if(this.debugMode){this.activateDebugConsole_()}if(a){this.focusInputField_()}this.initialized=true};SearchAsYouType.prototype.initializeVariables_=function(a){this.location=""+window.location;this.protocol=this.location.substr(0,this.location.indexOf("://")+3);this.resourcesPath=searchAsYouTypeConfiguration.resourcesPath;this.ajaxObject=null;this.results={};this.searchCache=[];this.initialized=false;this.waitingForSearchResults=false;this.resultsWindowHidden=true;this.inputFieldEl=a;this.typedQuery=this.getInputFieldValue_();this.searchResultsEl=0;this.alternateSearchResultsEl=0;this.inputFieldHasFocus=0;this.activeResult=-1;this.resultsWindowHiddenByClicking=false;this.arrowKeyProcessed=false;this.lastKeyPressed=0;this.showResultsTimeoutId=-1;this.keystrokeTimeoutId=-1;this.autocomplete="";this.autocompleteJustCollapsed=false;this.tipText="";this.debugMode=this.location.indexOf("debugSearchAsYouType")>-1};function getInternetExplorerVersion(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c}SearchAsYouType.prototype.detectBrowser_=function(){this.browserIE=false;this.browserIEold=false;this.browserFirefox=false;this.browserSafari=false;if(navigator.userAgent.indexOf("MSIE")>-1){this.browserIE=true;var a=getInternetExplorerVersion();if(a<9){this.browserIEold=true}}else{if((navigator.userAgent.indexOf("Firefox/")>-1)){this.browserFirefox=true;if((navigator.userAgent.indexOf("Firefox/1.0.")>-1)){this.browserFirefox10=true}else{this.browserFirefox10=false}}else{if(navigator.userAgent.indexOf("Safari")>-1){this.browserSafari=true;if(navigator.userAgent.indexOf("Version/")>-1){this.browserSafari3OrHigher=true}}}}};SearchAsYouType.prototype.attachStylesheets_=function(){this.attachStylesheet_("generic.css");this.attachStylesheet_("customized.css");if(this.browserIE){this.attachStylesheet_("ie.css");if(this.browserIEold){this.attachStylesheet_("ie-old.css")}}else{if(this.browserSafari){this.attachStylesheet_("safari.css")}}};SearchAsYouType.prototype.attachStylesheet_=function(a){var b=document.createElement("link");b.href=this.resourcesPath+"styles/"+a;b.type="text/css";b.rel="stylesheet";document.getElementsByTagName("head").item(0).appendChild(b)};SearchAsYouType.prototype.createDomElements_=function(){var a=document.createElement("input");a.id="searchAsYouTypeBackupSearchField";a.style.display="none";document.body.appendChild(a);this.searchResultsEl=document.createElement("div");this.searchResultsEl.id="searchAsYouTypeResults1";this.searchResultsEl.className="searchResults";this.searchResultsEl.style.display="none";this.searchResultsEl.style.position="absolute";this.searchResultsEl.onclick="event.cancelBubble = true;";this.searchResultsEl.tabIndex=-1;this.alternateSearchResultsEl=document.createElement("div");this.alternateSearchResultsEl.id="searchAsYouTypeResults2";this.alternateSearchResultsEl.className="searchResults";this.alternateSearchResultsEl.style.display="none";this.alternateSearchResultsEl.style.position="absolute";this.alternateSearchResultsEl.onclick="event.cancelBubble = true;";this.alternateSearchResultsEl.tabIndex=-1;this.searchResultsShadowEl=document.createElement("div");this.searchResultsShadowEl.id="searchAsYouTypeResultsShadow";this.searchResultsShadowEl.style.visibility="hidden";this.searchResultsShadowEl.style.display="none";this.searchResultsShadowEl.style.left=0;this.searchResultsShadowEl.style.top=0;this.searchResultsShadowEl.style.width=0;this.searchResultsShadowEl.style.height=0;var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowL";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowR";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowB";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowBL";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowBR";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowTL";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("div");a.id="searchAsYouTypeResultsShadowTR";this.searchResultsShadowEl.appendChild(a);var a=document.createElement("searchAsYouType");a.id="searchAsYouType";a.appendChild(this.searchResultsEl);a.appendChild(this.alternateSearchResultsEl);a.appendChild(this.searchResultsShadowEl);document.body.appendChild(a);this.waitingForSearchResultsEl=document.createElement("img");this.waitingForSearchResultsEl.style.visibility="hidden";this.waitingForSearchResultsEl.style.position="absolute";this.waitingForSearchResultsEl.src=this.resourcesPath+"/images/loading.gif";this.waitingForSearchResultsEl.alt="loading";document.body.appendChild(this.waitingForSearchResultsEl);this.autocompleteEl=document.createElement("div");this.autocompleteEl.id="searchAsYouTypeAutocomplete";this.autocompleteEl.className="searchAsYouTypeAutocompleteInputMatch";document.body.appendChild(this.autocompleteEl);this.autocompleteEl.onmousedown=searchAsYouTypeBind(this.handleAutocompleteMouseDown,this);this.autocompleteEl.style.zIndex=5000;this.autocompleteEl.style.display="none";this.autocompleteHelperEl=document.createElement("div");this.autocompleteHelperEl.id="searchAsYouTypeAutocompleteHelper";this.autocompleteHelperEl.visibility="hidden";this.autocompleteHelperEl.className="searchAsYouTypeAutocompleteInputMatch";document.body.appendChild(this.autocompleteHelperEl)};SearchAsYouType.prototype.getInputFieldValue_=function(){return this.inputFieldEl.value.toLowerCase().replace(/^\s+/g,"").replace(/\s+$/g,"")};SearchAsYouType.prototype.focusInputField_=function(){this.inputFieldEl.focus();if(this.inputFieldEl.createTextRange&&window.document.selection){var a=this.inputFieldEl.createTextRange();a.collapse(true);a.move("character",this.inputFieldEl.value.length);a.select()}};SearchAsYouType.prototype.clearInputField_=function(){this.inputFieldEl.value="";this.clearAutocomplete_(true);this.prepareRandomTip_()};SearchAsYouType.prototype.saveInputField=function(a){document.getElementById("searchAsYouTypeBackupSearchField").value=this.inputFieldEl.value;document.getElementById("searchAsYouTypeBackupSearchField").setAttribute("active",1)};SearchAsYouType.prototype.restoreInputField_=function(){if(document.getElementById("searchAsYouTypeBackupSearchField").getAttribute("active")){this.inputFieldEl.value=document.getElementById("searchAsYouTypeBackupSearchField").value;this.typedQuery=this.getInputFieldValue_()}};SearchAsYouType.prototype.addEventHandlers_=function(){this.inputFieldEl.onkeyup=searchAsYouTypeBind(this.handleInputKeyUp,this);this.inputFieldEl.onkeypress=searchAsYouTypeBind(this.handleInputKeyPress,this);this.inputFieldEl.onkeydown=searchAsYouTypeBind(this.handleInputKeyDown,this);this.inputFieldEl.onfocus=searchAsYouTypeBind(this.handleInputFocus,this);this.inputFieldEl.onblur=searchAsYouTypeBind(this.handleInputBlur,this);this.inputFieldEl.onclick=searchAsYouTypeBind(this.handleInputClick,this);this.inputFieldEl.onmousedown=searchAsYouTypeBind(this.handleInputMouseDown,this);this.inputFieldEl.setAttribute("autocomplete","off");if(window.addEventListener){document.body.addEventListener("click",searchAsYouTypeBind(this.handleBodyClick,this),false);document.addEventListener("keyup",searchAsYouTypeBind(this.handleBodyKeyUp,this),false);document.addEventListener("keydown",searchAsYouTypeBind(this.handleBodyKeyDown,this),false);document.addEventListener("keypress",searchAsYouTypeBind(this.handleBodyKeyPress,this),false);window.addEventListener("resize",searchAsYouTypeBind(this.handleBodyResize,this),false)}else{document.body.attachEvent("onclick",searchAsYouTypeBind(this.handleBodyClick,this));document.body.attachEvent("onkeyup",searchAsYouTypeBind(this.handleBodyKeyUp,this));document.body.attachEvent("onkeydown",searchAsYouTypeBind(this.handleBodyKeyDown,this));document.onkeypress=searchAsYouTypeBind(this.handleBodyKeyPress,this);window.attachEvent("onresize",searchAsYouTypeBind(this.handleBodyResize,this))}try{window.onpageshow=function(b){if(b.persisted){searchAsYouType.restoreInputField_()}}}catch(a){}if((this.browserFirefox)&&(!this.browserFirefox10)){window.onpagehide=searchAsYouTypeBind(this.saveInputField,this)}else{window.onunload=searchAsYouTypeBind(this.saveInputField,this)}};SearchAsYouType.prototype.prepareRandomTip_=function(){var a=["You can use arrow keys to navigate these results.","Press Tab, space or right arrow to auto-complete.","Press Esc or up arrow to hide this pop-up. Press Esc again to quickly clear the search field.","Click outside this pop-up to hide it. Click on the search bar twice to show it again."];if(Math.random()<0.05){this.tipText=a[Math.floor(Math.random()*a.length)]}else{this.tipText=""}};SearchAsYouType.prototype.updateDimensionsAndShadow_=function(n){var f=this.inputFieldEl;var l=0;var k=0;var g=f;do{l+=g.offsetLeft;k+=g.offsetTop;g=g.offsetParent}while(g);this.waitingForSearchResultsEl.style.left=(l+this.inputFieldEl.offsetWidth-19)+"px";this.waitingForSearchResultsEl.style.top=(k+3)+"px";this.autocompleteEl.setAttribute("originalLeft",l);this.autocompleteEl.style.top=k+"px";this.autocompleteEl.style.height=(this.inputFieldEl.clientHeight-1)+"px";if(n){k+=f.offsetHeight-2;var m=f.offsetWidth-2;n.style.left=(l+1)+"px";n.style.top=k+"px";n.style.width=m+"px";l=n.offsetLeft;k=n.offsetTop;m=n.offsetWidth;var a=n.scrollHeight;if(self.innerHeight){var b=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){var b=document.documentElement.clientHeight}else{if(document.body){var b=document.body.clientHeight}}}if(document.documentElement.scrollTop){var d=document.documentElement.scrollTop}else{var d=document.body.scrollTop}var c=b-d;var j=c-k-searchAsYouTypeConfiguration.bottomPageMargin;if(a>j){n.style.height=j+"px"}else{n.style.height="auto"}var i=n.offsetHeight;this.resizeShadowEl_("",l,k,m+4,i+6);this.resizeShadowEl_("L",-2,5,2,i-5);this.resizeShadowEl_("TL",-2,0,2,5);this.resizeShadowEl_("TR",m,0,2,5);this.resizeShadowEl_("R",m,5,2,i-5);this.resizeShadowEl_("B",4,i,m-8,6);this.resizeShadowEl_("BL",-2,i,6,6);this.resizeShadowEl_("BR",m-4,i,6,6)}};SearchAsYouType.prototype.resizeShadowEl_=function(i,a,g,b,d){var c=document.getElementById("searchAsYouTypeResultsShadow"+i);try{c.style.left=a+"px";c.style.top=g+"px";c.style.width=b+"px";c.style.height=d+"px"}catch(f){}};SearchAsYouType.prototype.search_=function(b){if(b===true){this.delayShowResults=false}else{this.delayShowResults=true}if(this.typedQuery.length==0){this.changeWaitingForSearchResults_(false);return}URL=searchAsYouTypeConfiguration.ajaxResponderUrl;URL+="?query="+encodeURIComponent(this.typedQuery);URL+="&jsonp=searchAsYouType.handleAjaxResponse";if(this.debugMode){URL+="&debug=1"}if(this.waitingForSearchResults){this.cancelCurrentSearch_()}if(this.debugMode){this.addToDebugConsoleTimesNewLine_("<td>"+this.typedQuery+"</td>");var a=new Date();this.debugQueryStartTime=a.getTime()}this.changeWaitingForSearchResults_(true);if(this.searchCache["_"+this.typedQuery]){this.ajaxRequestStartTime=-1;this.processResults_(this.searchCache["_"+this.typedQuery].results,true)}else{var a=new Date();this.ajaxRequestStartTime=a.getTime();this.ajaxObject=document.createElement("script");this.ajaxObject.src=URL;this.ajaxObject.type="text/javascript";this.ajaxObject.charset="utf-8";document.getElementsByTagName("head").item(0).appendChild(this.ajaxObject)}};SearchAsYouType.prototype.cancelCurrentSearch_=function(){if(this.ajaxObject){try{document.getElementsByTagName("head").item(0).removeChild(this.ajaxObject)}catch(a){}}};SearchAsYouType.prototype.changeWaitingForSearchResults_=function(a){if(this.waitingForSearchResults!=a){if(a){this.waitingForSearchResultsEl.style.visibility="visible"}else{this.waitingForSearchResultsEl.style.visibility="hidden";this.cancelCurrentSearch_()}}this.waitingForSearchResults=a};SearchAsYouType.prototype.handleAjaxResponse=function(b){if(b.results.length&&this.tipText){var a=searchAsYouTypeConfiguration.helpPageUrl;var c="<p> "+this.tipText;if(a){c+=' <a unselectable="on" class="unselectable moreDetails" href="'+a+'">Learn more</a>'}c+="</p>";b.results.push({type:"Tip",name:"",content:c,style:"compact",moreDetailsUrl:a})}this.processResults_(b,false)};SearchAsYouType.prototype.processResults_=function(d,f){if(this.lastKeyPressed==8){var a=true}else{var a=false}if(!d.autocompletedQuery){d.autocompletedQuery=d.query}d.countNotCompact=0;d.countExpanded=0;for(var c in d.results){if(d.results[c].style=="expanded"){d.countExpanded++;d.countNotCompact++}else{if(d.results[c].style=="normal"){d.countNotCompact++}}}this.results=searchAsYouTypeCloneObject(d);this.searchCache["_"+this.results.query]={};this.searchCache["_"+this.results.query].results=searchAsYouTypeCloneObject(d);this.resultsWindowHiddenByClicking=false;if(d.query==this.typedQuery){if(this.debugMode){var b=new Date();var g=b.getTime();this.addToDebugConsoleTimesCurrentLine_("<td>"+d.autocompletedQuery+"</td>");this.addToDebugConsoleTimesCurrentLine_("<td>"+d.results.length+"</td>");this.addToDebugConsoleTimesCurrentLine_("<td>"+searchAsYouTypeConfiguration.showResultsDelay+" ms</td>");if(f){this.addToDebugConsoleTimesCurrentLine_("<td colspan='4'>(from cache)</td>")}else{this.addToDebugConsoleTimesCurrentLine_("<td class='no'>"+(g-this.debugQueryStartTime)+" ms</td>");this.addToDebugConsoleTimesCurrentLine_("<td class='no'>"+this.results.debugInfo.globalTime+" ms</td>")}}if((f)&&(a)){if(this.searchCache["_"+this.results.query].autocompleted){this.hideResultsWindow_();this.changeWaitingForSearchResults_(false);return}}if(!this.results.results.length){this.hideResultsWindow_();this.changeWaitingForSearchResults_(false)}else{this.prepareResultsWindow_();if(!a){this.addAutocompleteTextIfPossible_()}}}};SearchAsYouType.prototype.getResultTypeDescriptionHtml_=function(a){return"<h1>"+a+": </h1>"};SearchAsYouType.prototype.getResultTypeClassName_=function(a){return a.replace(/\ /g,"")};SearchAsYouType.prototype.getResultsHtml_=function(k){var d=0;var g="";var h=null;var b=false;var l=["expandedPriority","expanded","normal","compact"];for(var c in l){for(var f=0;f<this.results.results.length;f++){if(this.results.results[f].style!=l[c]){continue}if((k==-1)||(k==d)){if(k>-1){var a="expandedPriority"}else{var a=l[c]}if((a!="normal")||(h!=this.results.results[f].type)){if(b){g+="</div>"}var j="searchResult "+this.getResultTypeClassName_(this.results.results[f].type);if(d==0){j+=" first"}if(a=="normal"){g+='<div class="'+j+' summary" ';g+='onclick="event.cancelBubble = true;" ';g+=">";h=this.results.results[f].type;g+=this.getResultTypeDescriptionHtml_(this.results.results[f].type);b=true}}if(a!="normal"){g+='<div id="searchResult'+d+'" class="'+j+'" originalId="'+f+'" moreDetailsUrl="'+this.results.results[f].moreDetailsUrl+'" onclick="searchAsYouType.handleSearchResultClick(event)">'+this.results.results[f].content+"</div>"}else{g+='<a  id="searchResult'+d+'" originalId="'+f+'"  onclick="return  searchAsYouType.expandSummaryResult(event, '+d+')"  class="command nowrap summarized" href="'+this.results.results[f].moreDetailsUrl+'">'+this.results.results[f].name+"</a>"}}d++}}return g};SearchAsYouType.prototype.prepareResultsWindow_=function(){var c;this.activeResult=-1;if(this.results.countNotCompact<=searchAsYouTypeConfiguration.maxFullResults){for(var b=0;b<this.results.results.length;b++){if(this.results.results[b].style=="expanded"){this.results.results[b].style="expandedPriority"}else{if(this.results.results[b].style=="normal"){this.results.results[b].style="expanded"}}}}this.resultsHtml=this.getResultsHtml_(-1);if(this.showResultsTimeoutId>-1){clearTimeout(this.showResultsTimeoutId)}var d;if(this.delayShowResults){if(this.ajaxRequestStartTime==-1){d=0}else{var a=new Date();d=a.getTime()-this.ajaxRequestStartTime}var d=searchAsYouTypeConfiguration.showResultsDelay-d;if(d<=1){d=1}}else{d=1}this.showResultsTimeoutId=setTimeout(searchAsYouTypeBind(this.showResultsWindow_,this),d)};SearchAsYouType.prototype.showResultsWindow_=function(){this.showResultsTimeoutId=-1;this.changeWaitingForSearchResults_(false);clearInterval(this.hideTimeout);this.resultsWindowHiddenByClicking=false;this.resultsWindowHidden=false;var c=0;var d;while(d=document.getElementById("searchResult"+c)){d.id="";c++}this.alternateSearchResultsEl.style.height="1px";this.alternateSearchResultsEl.style.visibility="hidden";this.alternateSearchResultsEl.style.display="block";this.alternateSearchResultsEl.innerHTML=this.resultsHtml;this.alternateSearchResultsEl.style.opacity=0.99;var b=this.alternateSearchResultsEl.getElementsByTagName("a");for(var c=0,a=b.length;c<a;c++){b.item(c).tabIndex=-1;b.item(c).target="_top"}var b=this.alternateSearchResultsEl.getElementsByTagName("img");for(var c=0,a=b.length;c<a;c++){b.item(c).style.display="none";b.item(c).onload=searchAsYouTypeBind(this.handleImageOnLoad,this,b.item(c))}this.updateDimensionsAndShadow_(this.alternateSearchResultsEl);this.searchResultsEl.style.visibility="hidden";this.searchResultsEl.style.display="none";this.searchResultsShadowEl.style.display="block";this.searchResultsShadowEl.style.visibility="visible";this.searchResultsShadowEl.style.opacity=1;this.alternateSearchResultsEl.style.visibility="visible";var d=this.searchResultsEl;this.searchResultsEl=this.alternateSearchResultsEl;this.alternateSearchResultsEl=d};SearchAsYouType.prototype.handleImageOnLoad=function(a){if(a){a.style.display="inline";this.updateDimensionsAndShadow_(this.searchResultsEl)}return false};SearchAsYouType.prototype.hideResultsWindow_=function(){if(this.resultsWindowHidden){return}this.clearAutocomplete_(true);this.hideOpacity=this.searchResultsEl.style.opacity;clearInterval(this.hideTimeout);this.fadeLastTime=new Date().getTime();this.hideTimeout=setInterval(searchAsYouTypeBind(this.fadeResultsWindow_,this),20);this.resultsWindowHidden=true;this.activeResult=-1};SearchAsYouType.prototype.fadeResultsWindow_=function(){var a=new Date().getTime();this.hideOpacity-=(a-this.fadeLastTime)*0.005;this.fadeLastTime=a;if(this.hideOpacity<=0){clearInterval(this.hideTimeout);this.searchResultsEl.style.display="none";this.searchResultsShadowEl.style.visibility="hidden"}else{this.searchResultsEl.style.opacity=this.hideOpacity;this.searchResultsShadowEl.style.opacity=this.hideOpacity}};SearchAsYouType.prototype.highlightSearchResult_=function(a){document.getElementById("searchResult"+a).className+=" highlighted"};SearchAsYouType.prototype.unhighlightSearchResult_=function(a){document.getElementById("searchResult"+a).className=document.getElementById("searchResult"+a).className.replace(/ highlighted/,"")};SearchAsYouType.prototype.highlightNextSearchResult_=function(){if(this.results.results.length){if(this.activeResult==-1){this.activeResult=0;if(this.inputFieldHasFocus){this.inputFieldEl.blur()}this.highlightSearchResult_(this.activeResult)}else{if(this.activeResult<this.results.results.length-1){this.unhighlightSearchResult_(this.activeResult);this.activeResult++;this.highlightSearchResult_(this.activeResult)}}}};SearchAsYouType.prototype.highlightPrevSearchResult_=function(){if(this.results.results.length){if(this.activeResult==0){this.unhighlightSearchResult_(this.activeResult);this.activeResult=-1;this.inputFieldEl.focus()}else{if(this.activeResult>0){this.unhighlightSearchResult_(this.activeResult);this.activeResult--;this.highlightSearchResult_(this.activeResult)}}}};SearchAsYouType.prototype.expandSummaryResult_=function(h,a){h=h||window.event;if(h){h.cancelBubble=true}var i=document.createElement("divider");var b=document.getElementById("searchResult"+a);var j=this.results.results[b.getAttribute("originalId")];var f=b.parentNode;f.insertBefore(i,b);f.removeChild(b);f.parentNode.innerHTML=f.parentNode.innerHTML.replace(/<divider>/,"</div>"+this.getResultsHtml_(a)+"<div class='searchResult summary "+this.getResultTypeClassName_(j.type)+"'>");var b=document.getElementById("searchResult"+a);var c=document.createElement("span");c.innerHTML="";var d=b.previousSibling;if(d){if(!d.getElementsByTagName("a").length){d.parentNode.removeChild(d)}else{d.innerHTML=d.innerHTML.replace(new RegExp(c.innerHTML+"$"),"")}}var g=b.nextSibling;if(g){if(!g.getElementsByTagName("a").length){g.parentNode.removeChild(g)}else{g.innerHTML=g.innerHTML.replace(new RegExp("^"+c.innerHTML),this.getResultTypeDescriptionHtml_(j.type))}}this.updateDimensionsAndShadow_(this.searchResultsEl);return false};SearchAsYouType.prototype.addAutocompleteTextIfPossible_=function(){var c=this.results;if(!c.query){return}var d=this.getInputFieldValue_().toLowerCase();if((c.query.toLowerCase()==d.substr(0,c.query.length))&&(d==c.autocompletedQuery.substr(0,d.length).toLowerCase())){this.autocomplete=c.autocompletedQuery.substring(d.length);if(this.autocomplete){var f=this.inputFieldEl.value.replace(/\ /,"&nbsp;");this.autocompleteHelperEl.style.display="block";this.autocompleteHelperEl.innerHTML=f;var b=this.autocompleteHelperEl.offsetWidth;this.autocompleteHelperEl.innerHTML=this.autocomplete;var a=this.autocompleteHelperEl.offsetWidth;this.autocompleteHelperEl.style.display="none";this.autocompleteEl.innerHTML=this.autocomplete.replace(/\ /,"&nbsp;");this.autocompleteEl.style.left=(parseInt(this.autocompleteEl.getAttribute("originalLeft"))+b)+"px";this.autocompleteEl.style.display="block"}else{this.autocompleteEl.style.display="none"}return true}this.clearAutocomplete_(true);return false};SearchAsYouType.prototype.collapseAutocomplete_=function(){if(this.autocomplete){this.inputFieldEl.value+=this.autocomplete+" ";this.inputFieldEl.selectionStart=this.inputFieldEl.value.length;this.inputFieldEl.selectionEnd=this.inputFieldEl.value.length;this.clearAutocomplete_(false)}};SearchAsYouType.prototype.clearAutocomplete_=function(a){if(this.autocomplete!=""){this.autocomplete="";this.autocompleteEl.innerHTML="";this.autocompleteEl.style.display="none";if(a){this.hideResultsWindow_()}}};SearchAsYouType.prototype.handleInputKeyPress=function(c){if(!this.initialized){return}var b=true;c=c||window.event;var a=(c.which)?c.which:c.keyCode;switch(a){case 9:if(this.autocompleteJustCollapsed){b=false}break}return b};SearchAsYouType.prototype.handleInputKeyDown=function(b){if(!this.initialized){return}b=b||window.event;var a=(b.which)?b.which:b.keyCode;if((a==8)||(a==46)){this.clearAutocomplete_(false)}};SearchAsYouType.prototype.handleInputKeyUp=function(c){if(!this.initialized){return}c=c||window.event;var a=(c.which)?c.which:c.keyCode;this.lastKeyPressed=a;if(this.autocompleteJustCollapsed){this.typedQuery=this.lastTypedQuery=this.getInputFieldValue_();this.autocompleteJustCollapsed=false;return}var b=this.getInputFieldValue_();if(b!=this.typedQuery){if(this.showResultsTimeoutId>-1){clearTimeout(this.showResultsTimeoutId)}this.lastTypedQuery=this.typedQuery;if(a!=8){if(this.addAutocompleteTextIfPossible_()){this.typedQuery=this.lastTypedQuery=this.getInputFieldValue_();this.search_()}}this.typedQuery=this.getInputFieldValue_();if(this.lastTypedQuery!=this.typedQuery){if(this.keystrokeTimeoutId!=-1){clearTimeout(this.keystrokeTimeoutId);this.keystrokeTimeoutId=-1}if(!this.typedQuery){this.hideResultsWindow_();this.clearInputField_()}if(a==8){this.clearAutocomplete_(true)}this.keystrokeTimeoutId=setTimeout(searchAsYouTypeBind(this.search_,this),searchAsYouTypeConfiguration.keystrokeDelay)}}return true};SearchAsYouType.prototype.handleBodyKeyDown=function(g){var d=true;if(!this.initialized){return}g=g||window.event;var a=(g.which)?g.which:g.keyCode;var c=(g.target)?g.target:g.srcElement;switch(a){case 13:case 32:if((!this.resultsWindowHidden)&&(this.activeResult>=0)){if(document.getElementById("searchResult"+this.activeResult).className.indexOf("summarized")==-1){var f=document.getElementById("searchResult"+this.activeResult);if(f.href){var b=f.href}else{if(f.getAttribute("moreDetailsUrl")){var b=f.getAttribute("moreDetailsUrl")}}if(b){this.hideResultsWindow_();this.goToUrl_(b)}}else{this.expandSummaryResult_(null,this.activeResult);this.highlightSearchResult_(this.activeResult)}d=false}break;case 27:if(this.inputFieldHasFocus){if(this.browserSafari&&!this.browserSafari3OrHigher){if(this.escapeKeyJustPressed){this.escapeKeyJustPressed=false;break}else{this.escapeKeyJustPressed=true}}if(!this.resultsWindowHidden){this.hideResultsWindow_();d=false;this.inputFieldEl.focus();this.inputFieldHasFocus=1}else{this.clearInputField_();d=false}}break;case 35:if((this.inputFieldHasFocus)&&(this.autocomplete!="")){this.collapseAutocomplete_();this.autocompleteJustCollapsed=true}break;case 40:case 63233:case 39:if(a==39){if((this.inputFieldHasFocus)&&(this.autocomplete!="")){this.collapseAutocomplete_();this.autocompleteJustCollapsed=true}}if((this.resultsWindowHidden)&&(this.inputFieldHasFocus)&&(a!=39)){this.search_(true);d=false}else{if((!this.resultsWindowHidden)&&((this.activeResult>=0)||((a!=39)&&(this.inputFieldHasFocus)))){this.highlightNextSearchResult_();d=false;this.arrowKeyProcessed=true}}break;case 38:case 63235:case 37:if(a==37){this.clearAutocomplete_(true)}if((!this.resultsWindowHidden)&&(this.inputFieldHasFocus)&&(a!=37)){this.hideResultsWindow_();d=false;this.arrowKeyProcessed=true}else{if((!this.resultsWindowHidden)&&(this.activeResult>=0)){this.highlightPrevSearchResult_();d=false;this.arrowKeyProcessed=true}}break;case 9:if(this.inputFieldHasFocus&&(this.autocomplete!="")){this.collapseAutocomplete_();this.autocompleteJustCollapsed=true;d=false}break}if(!this.resultsWindowHidden&&d){if(((!this.inputFieldHasFocus)&&((a<37)||(a>40)))||((a==9)&&(!this.autocompleteJustCollapsed))){this.hideResultsWindow_()}}if(!d){g.returnValue=false;if(g.preventDefault){g.preventDefault()}}};SearchAsYouType.prototype.handleBodyKeyPress=function(c){var b=true;if(this.initialized){c=c||window.event;var a=(c.which)?c.which:c.keyCode;if((this.arrowKeyProcessed)&&(a>=37)&&(a<=40)){this.arrowKeyProcessed=false;b=false}if(!b){c.returnValue=false;if(c.preventDefault){c.preventDefault()}}}};SearchAsYouType.prototype.handleBodyKeyUp=function(d){var c=true;d=d||window.event;var a=(d.which)?d.which:d.keyCode;var b=(d.target)?d.target:d.srcElement;this.arrowKeyProcessed=false;switch(a){case 32:if(this.inputFieldHasFocus&&(this.autocomplete!="")){this.clearAutocomplete_(true);c=false}break}if(!c){d.returnValue=false;if(d.preventDefault){d.preventDefault()}}};SearchAsYouType.prototype.handleBodyResize=function(a){this.updateDimensionsAndShadow_(this.searchResultsEl)};SearchAsYouType.prototype.handleInputBlur=function(a){this.inputFieldHasFocus=0};SearchAsYouType.prototype.handleInputFocus=function(a){this.inputFieldHasFocus=0.5};SearchAsYouType.prototype.handleInputMouseDown=function(a){if(this.autocomplete){this.collapseAutocomplete_()}};SearchAsYouType.prototype.handleAutocompleteMouseDown=function(a){if(this.autocomplete){this.collapseAutocomplete_()}};SearchAsYouType.prototype.handleInputClick=function(a){a=a||window.event;a.cancelBubble=true;if(this.inputFieldHasFocus==1){if(this.resultsWindowHidden){this.search_(true)}}else{this.inputFieldHasFocus=1}};SearchAsYouType.prototype.handleSearchResultClick=function(b){b=b||window.event;var a=(b.target)?b.target:b.srcElement;while((a.tagName!="DIV")||(a.className.indexOf("searchResult")==-1)){a=a.parentNode}if(a.getAttribute("moreDetailsUrl")){this.goToUrl_(a.getAttribute("moreDetailsUrl"))}};SearchAsYouType.prototype.handleBodyClick=function(b){b=b||window.event;var a=(b.target)?b.target:b.srcElement;this.clearAutocomplete_();this.hideResultsWindow_();this.resultsWindowHiddenByClicking=true};SearchAsYouType.prototype.goToUrl_=function(a){try{if(top.location!=location){top.location.href=a}else{location.href=a}}catch(b){location.href=a}};SearchAsYouType.prototype.activateDebugConsole_=function(){document.write("<div onclick='event.cancelBubble = true;' id='searchAsYouTypeDebugConsole' class='expanded'><div style='float: right'><button onclick='searchAsYouType.clearDebugConsoleTimes()'>Clear console</button><button onclick='searchAsYouType.clearCache()'>Clear cache</button><button onclick='searchAsYouType.toggleDebugConsole(event)'>Show/hide</button></div><h1>Search-as-you-type debug console</h1><br /><table id='searchAsYouTypeDebugTimes'></table></div>");this.debugConsoleTimesHeader='<tr><th>Query</th><th>Auto-completed</th><th>No. of results</th><th>Delay before<br />displaying:<br />(fixed)</th><th title="JS: Time from launching a query to displaying it">Total turn-around<br />client+server</th><th title="Ajax: Total time spent on the server">Server:<br />Total time</th></tr>';this.clearDebugConsoleTimes()};SearchAsYouType.prototype.toggleDebugConsole=function(b){var a=document.getElementById("searchAsYouTypeDebugConsole");if(a.className.indexOf("expanded")!=-1){a.className=a.className.replace(/expanded/,"contracted")}else{a.className=a.className.replace(/contracted/,"expanded")}b=b||window.event;b.cancelBubble=true;this.inputFieldEl.focus()};SearchAsYouType.prototype.addToDebugConsoleTimesNewLine_=function(a){this.debugConsoleTimesContents=this.debugConsoleTimesCurrentLine+this.debugConsoleTimesContents;this.debugConsoleTimesCurrentLine="<tr>"+a;document.getElementById("searchAsYouTypeDebugTimes").innerHTML=this.debugConsoleTimesHeader+this.debugConsoleTimesCurrentLine+this.debugConsoleTimesContents};SearchAsYouType.prototype.addToDebugConsoleTimesCurrentLine_=function(a){this.debugConsoleTimesCurrentLine+=a;document.getElementById("searchAsYouTypeDebugTimes").innerHTML=this.debugConsoleTimesHeader+this.debugConsoleTimesCurrentLine+this.debugConsoleTimesContents};SearchAsYouType.prototype.clearDebugConsoleTimes=function(){this.debugConsoleTimesContents="";this.debugConsoleTimesCurrentLine="";document.getElementById("searchAsYouTypeDebugTimes").innerHTML=this.debugConsoleTimesHeader;this.inputFieldEl.focus()};SearchAsYouType.prototype.clearCache=function(){this.searchCache=[];this.inputFieldEl.focus()};function searchAsYouTypeBind(c,b,f){var a=c.boundArgs_||[];a=a.concat(Array.prototype.slice.call(arguments,2));if(typeof c.boundSelf_!="undefined"){b=c.boundSelf_}if(typeof c.foundFn_!="undefined"){c=c.boundFn_}var d=function(){var g=a.concat(Array.prototype.slice.call(arguments));return c.apply(b,g)};d.boundArgs_=a;d.boundSelf_=b;d.boundFn_=c;return d}function searchAsYouTypeCloneObject(c){if(c instanceof Array){var a=[]}else{var a={}}for(var b in c){if(c[b].constructor.toString().indexOf("Array")!=-1){a[b]=searchAsYouTypeCloneObject(c[b])}else{if(typeof c[b]=="object"){a[b]=searchAsYouTypeCloneObject(c[b])}else{a[b]=c[b]}}}return a}var searchAsYouType=new SearchAsYouType();try{if(searchAsYouTypeCallback){searchAsYouTypeCallback()}}catch(e){};